# Contributor: Dan Serban

pkgname=yaffas
pkgver=0.7.0
pkgrel=1
pkgdesc="yet another framework for administrating servers"
arch=(any)
url=http://sourceforge.net/projects/yaffas/
license=(AfferoGPLv3)
depends=(perl perl-net-ssleay perl-authen-pam)
source=("http://repo.yaffas.org/ubuntu/pool/yaffas-certificates_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-config_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-core_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-install-lib_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-lang_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-ldap_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-lib_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-lib-file-samba_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-about_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-authsrv_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-bulkmail_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-certificate_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-changelang_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-changepw_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-fetchmail_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-group_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-logfiles_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-mailalias_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-mailq_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-mailsrv_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-netconf_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-notify_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-saveconf_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-service_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-setup_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-snmpconf_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-support_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-systeminfo_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-module-users_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-postfix_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-samba_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-theme_0.7.0-1_all.deb"
        "http://repo.yaffas.org/ubuntu/pool/yaffas-yui_0.7.0-1_all.deb")
md5sums=('a3e44a9de287759e505fec2a2d427469'
         'f66ffe40ce4689854a84ce431e019127'
         '0ad33a680b460bc54e8d20b53b573276'
         '5fd9bc4c7a6ef9167a730f96db465b1a'
         '27cb76b839fd88db5cba9201b8a45071'
         'd97f7fc30fec27eb0b908d7049967aea'
         'e9d1aefbfe9fb2794bf0421b0b23a4ab'
         'fd1a36a93aad7bc4c37141229c6e4d2e'
         '2a2cb4f9d82d5ba42cdf94cb1a13a41b'
         'b8974205b1c72070845c5c0e9483acea'
         '32b1e79d7896e7403ed3320606a63de1'
         '46cc6ea435f7f81595a56bdab218fd8c'
         'cae4bdcf546ef5e10a10e859f4b6ec71'
         '575b719efa9dd39fc50f562a2afb55fc'
         '8af7b3a75d41475cbd627c8f1370c5ab'
         '2cc640bb3c4d444384d326674fb73b7d'
         '1bb5ca8937e5af373d5065c8b824bd51'
         '9f81648db826482503e0a155e59a63f0'
         '220640aa4281e0ec2f0bfedc2b90a416'
         '7382b275e7b3210fe643833c8b1e1809'
         'ff90efb69a9d2a24966824f2d1578065'
         '00169d67fefd3dc87d73429240a1e693'
         '73d2bcbe7210a06dd9750b969d320f0c'
         '553bde9eed5d42c1caf5f3e7784061ac'
         'f150a019c1587184cc6b386482545043'
         'd957c22b527ff534d87254dc59f30a95'
         '2ed7d6ced3bf4e62b0487f9cad6dbe48'
         '85df374e8043d1933791cfdcdc9901c1'
         'ebc1483290b38f6459494e2b9afaeb45'
         '2869ecd93fc82c0f2395169b385bf228'
         '9cf5650ca1b799e16d0c2a10401f977f'
         'd18a062830ed45ad968ad1394c96aa19'
         '4ead716f908e00b7471d48d68f32b8ea')
options=('!strip')

build()
{
  ar -xv "yaffas-certificates_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-config_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-core_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-install-lib_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-lang_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-ldap_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-lib_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-lib-file-samba_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-about_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-authsrv_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-bulkmail_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-certificate_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-changelang_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-changepw_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-fetchmail_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-group_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-logfiles_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-mailalias_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-mailq_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-mailsrv_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-netconf_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-notify_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-saveconf_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-service_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-setup_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-snmpconf_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-support_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-systeminfo_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-module-users_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-postfix_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-samba_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-theme_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  ar -xv "yaffas-yui_0.7.0-1_all.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  # Storing yaffas separately in order to avoid overwriting existing files
  # Manually change PKGBUILD as needed
  mkdir -p "${pkgdir}/opt/yaffas"
  mv etc opt tmp usr "${pkgdir}/opt/yaffas/"
}
